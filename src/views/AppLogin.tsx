import { Component } from 'react'
import { User } from '../models/user'
import { UserCred } from '../models/UserCred'
import {userService} from '../services/user/user.service'
import {dashboardService} from '../services/dashboard/dashboardService'

import { NavLink, useHistory } from 'react-router-dom';
export class AppLogin extends Component {

    state : {user: User, isLogedin:Boolean,isLoading: Boolean, userCred: UserCred } = {
        userCred: {
            username: '',
            password: ''
        }, 
        user: {
            email: '',
            name: '',
            username: '',
            position: '',
            user_type: '',
            tel: 0,
            license: [],
            _id: ''
         },
         isLogedin: false,
         isLoading: false
    }


    whenSubmit = async ()=>{
        this.setState({isLoading: true})
        let user = await userService.login(this.state.userCred)
        console.log('user',user);
        if (user){
            this.setState({user: user})
            this.setState({isLogedin: true})
            this.setState({isLoading: false})
            console.log('set');
            console.log(this.state.user);
        }        
        let dashConnect = await dashboardService.loginDashboard({email:'' ,password:''})
        console.log('dashuser',dashConnect);
        
    }

    setUsername = ({target}:any)=> {
        this.setState((prevState:any) => ({userCred: {...prevState.userCred, username: target.value}}))
    }

    setPassword = ({target}:any)=> {
        this.setState((prevState:any) => ({userCred: {...prevState.userCred, password: target.value}}))
    }

    render() {
        return (
            <section className='login-pannel grid'>
                <div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="60vw" viewBox="0 0 796 399" fill="none">
                    <path opacity="0.9"
                        d="M398.805 262C320.586 261.773 265.498 200.24 266.003 130.792C266.479 65.2547 321.756 3.8434 397.148 4.0003C469.288 4.15139 531.286 58.2001 530.247 135.755C529.26 204.697 470.53 262.058 398.805 262ZM400.79 110.796C401.45 110.349 401.86 110.11 402.216 109.82C407.819 105.252 413.506 100.801 418.99 96.0708C424.479 91.3947 428.756 85.5116 431.468 78.9049C433.179 74.7151 435.033 70.5835 436.608 66.3414C438.432 61.4136 442.942 59.7807 447.303 64.5458C459.235 77.5335 467.387 92.5202 472.64 109.111C472.83 109.692 473.038 110.314 473.234 110.918L473.703 111.087C473.879 110.767 474.078 110.461 474.297 110.168C477.25 106.619 479.623 102.643 481.333 98.3836C487.275 83.5886 487.542 68.4102 484.63 52.976C483.785 48.108 481.09 43.7323 477.084 40.7262C448.45 18.063 415.995 8.93963 379.506 14.0882C366.141 15.9853 353.216 20.1464 341.311 26.3845C311.693 41.8187 291.688 65.1598 281.298 96.4079C278.018 106.246 276.265 116.392 275.356 126.683C275.285 127.485 275.356 128.299 275.356 129.525C275.549 129.275 275.722 129.011 275.873 128.735C276.069 128.154 276.259 127.573 276.432 126.991C278.622 119.272 281.845 111.869 286.016 104.973C295.053 89.9925 307.769 78.6144 322.547 69.247C334.246 61.8262 346.825 56.0558 359.428 50.3028C369.969 45.4913 380.784 41.1678 389.94 33.8575C390.831 33.1427 392.566 32.9336 393.761 33.1776C396.922 33.8169 397.962 36.9025 396.577 40.0056C395.105 43.0563 393.893 46.2205 392.953 49.4661C390.897 57.4737 391.033 65.6149 391.889 73.7853C393.134 85.2619 395.685 96.5666 399.495 107.489C399.875 108.518 400.309 109.547 400.79 110.796V110.796ZM381.152 251.86L381.318 251.447C381.015 251.064 380.724 250.68 380.403 250.285C377.771 246.891 374.776 243.707 372.578 240.063C368.044 232.561 363.897 224.838 359.69 217.156C358.674 215.308 357.467 214.006 355.275 213.64C354.199 213.409 353.148 213.076 352.138 212.647C343.896 209.573 336.421 205.092 329.041 200.443C318.905 194.186 309.535 186.814 301.114 178.472C293.901 171.359 287.811 163.235 283.045 154.367C282.617 153.56 282.1 152.798 281.619 152.014C281.297 152.27 281.085 152.635 281.025 153.037C280.45 158.201 280.725 163.421 281.839 168.5C284.162 180.122 289.438 190.512 296.408 200.095C307.876 215.86 322.374 228.424 339.345 238.262C350.474 244.712 362.221 249.675 375.192 251.36C377.135 251.616 379.149 251.697 381.152 251.86ZM413.577 175.154C413.03 175.34 412.876 175.369 412.739 175.438C412.418 175.613 412.109 175.804 411.8 176.019C404.028 180.94 397.114 187.049 391.324 194.115C384.39 202.547 379.037 211.74 377.616 222.7C376.963 227.761 377.23 232.619 381.051 236.704C385.21 241.132 389.405 245.526 393.196 250.233C395.573 253.196 398.14 253.109 401.194 252.051C401.785 251.843 402.362 251.601 402.923 251.325C407.623 249.07 410.648 245.253 412.941 240.824C417.41 232.224 418.77 222.915 419.162 213.437C419.473 204.508 418.626 195.578 416.643 186.857C415.793 182.969 414.629 179.146 413.577 175.183V175.154ZM295.012 108.698C294.507 109.401 294.198 109.791 293.936 110.203C289.497 117.114 286.311 124.722 284.518 132.692C284.266 133.876 284.319 135.102 284.673 136.26C288.054 147.22 294.239 156.64 301.768 165.252C315.904 181.43 332.981 193.964 352.197 203.802C352.732 204.075 353.284 204.308 354.229 204.738C353.332 201.919 352.512 199.508 351.787 197.067C349.458 189.249 347.146 181.426 344.853 173.596C344.635 172.751 344.249 171.956 343.715 171.258C343.182 170.56 342.512 169.972 341.745 169.528C333.016 164.49 325.702 157.796 318.94 150.52C308.31 139.096 301.215 125.678 295.974 111.232C295.707 110.5 295.416 109.756 295.012 108.698ZM369.5 216.023L369.987 216.174C373.16 205.522 377.83 195.643 385.014 187.026C392.198 178.408 400.921 171.591 410.743 165.978C408.182 158.801 405.674 151.758 403.137 144.646C402.703 144.802 402.454 144.872 402.234 144.977C389.649 151.113 378.05 158.615 368.276 168.599C364.075 172.887 360.444 177.594 358.174 183.167C357.798 184.09 357.713 185.102 357.931 186.073C360.758 196.065 364.429 205.811 368.906 215.209C369.079 215.497 369.278 215.769 369.5 216.023V216.023ZM353.801 171.679L354.312 171.818C354.808 171.402 355.277 170.956 355.715 170.482C357.931 167.808 360.034 165.042 362.322 162.433C372.251 151.125 384.426 142.821 398.306 136.83C399.596 136.249 399.881 135.743 399.382 134.435C397.249 128.81 395.222 123.156 393.178 117.502C393.089 117.088 392.869 116.711 392.549 116.425C392.229 116.139 391.826 115.959 391.396 115.91C387.706 115.329 384.176 115.979 380.7 117.124C370.278 120.57 361.478 126.649 353.142 133.477C350.937 135.284 350.129 137.591 350.171 140.293C350.329 148.807 351.124 157.298 352.547 165.699C352.952 167.698 353.397 169.685 353.801 171.679ZM342.078 160.056C342.078 159.568 342.078 159.278 342.078 158.993C341.846 156.39 341.448 153.763 341.406 151.177C341.305 144.407 341.335 137.637 341.406 130.868C341.418 130.394 341.317 129.924 341.111 129.495C340.905 129.066 340.599 128.691 340.218 128.398C337.33 125.713 334.276 123.127 331.757 120.152C323.616 110.639 318.827 99.5052 315.803 87.5635C315.66 86.9823 315.452 86.436 315.208 85.7503C314.868 85.912 314.546 86.1066 314.246 86.3314C310.348 90.0738 306.45 93.8104 302.606 97.605C302.448 97.8177 302.337 98.0607 302.282 98.318C302.227 98.5754 302.228 98.8413 302.285 99.0983C302.879 101.591 303.473 104.09 304.186 106.542C310.609 128.078 323.913 145.041 341.026 159.464C341.363 159.677 341.714 159.867 342.078 160.033V160.056ZM479.289 223.037C478.949 222.844 478.595 222.675 478.231 222.531C472.705 220.945 467.221 219.213 461.641 217.836C455.699 216.366 449.567 215.703 443.578 217.255C438.943 218.463 434.54 220.48 429.977 221.973C428.194 222.554 427.558 223.612 427.232 225.355C425.526 234.554 422.234 243.131 416.281 250.587C416.073 250.854 415.924 251.168 415.573 251.749C439.201 248.379 461.328 238.4 479.289 223.013V223.037ZM371.633 55.405L371.288 55.1202C370.552 55.3701 369.809 55.5909 369.09 55.8699C358.489 59.9725 348.412 65.1269 338.477 70.5545C333.86 73.0765 329.445 75.9587 324.924 78.6492C324.453 78.8717 324.085 79.2573 323.889 79.731C323.694 80.2047 323.685 80.7325 323.866 81.2119C324.246 82.6472 324.502 84.1174 324.84 85.5585C327.58 97.2213 332.274 107.966 340.289 117.142C340.824 117.723 341.395 118.304 342.25 119.228C345.952 94.9842 354.657 73.3553 371.633 55.405ZM504.025 193.708C501.452 192.587 499.123 191.448 496.698 190.536C491.107 188.414 485.409 187.142 479.336 188.461C475.331 189.338 471.885 191.395 468.326 193.255C466.169 194.377 463.828 195.161 461.588 196.161C460.831 196.413 460.138 196.821 459.556 197.358C457.179 200.147 454.861 203.012 452.532 205.859C452.223 206.243 451.938 206.661 451.552 207.242L457.012 208.038C466.52 209.392 475.64 211.973 484.137 216.412C485.29 216.993 485.92 216.906 486.805 216.005C492.308 210.351 497.25 204.198 501.565 197.631C502.343 196.434 503.092 195.213 504.025 193.708ZM520.567 138.724C520.275 138.798 519.989 138.893 519.712 139.009C511.476 143.425 504.631 149.19 500.495 157.656C496.841 165.129 492.61 172.26 486.77 178.356C486.459 178.795 486.189 179.259 485.961 179.744C493.762 179.95 501.342 182.322 507.816 186.584C514.108 177.222 522.059 147.266 520.567 138.741V138.724ZM467.886 140.729C467.692 140.683 467.492 140.659 467.292 140.659C467.089 140.712 466.89 140.78 466.698 140.863C459.912 143.768 452.93 145.744 445.438 145.703C445.14 145.767 444.862 145.9 444.629 146.093C444.396 146.285 444.215 146.531 444.101 146.807C442.073 153.707 439.198 160.341 435.538 166.565C435.015 167.471 435.105 167.994 435.984 168.57C441.979 172.498 448.533 174.66 455.794 174.381C460.15 174.23 461.956 172.777 463.263 168.709C465.317 162.36 466.711 155.824 467.423 149.201C467.69 146.418 467.732 143.565 467.886 140.746V140.729ZM468.237 182.237L468.546 182.475C468.978 182.207 469.391 181.91 469.782 181.586C473.151 178.431 476.49 175.241 479.883 172.085C483.75 168.48 486.365 163.779 487.358 158.644C488.519 153.449 489.378 148.193 489.931 142.902C490.914 132.604 489.685 122.218 486.324 112.412C486.108 111.894 485.864 111.388 485.593 110.895C482.783 114.881 479.722 118.223 475.795 120.739C475.51 120.925 475.42 121.634 475.486 122.058C476.84 130.211 477.306 138.482 476.876 146.732C476.112 158.461 473.374 169.986 468.771 180.843C468.558 181.319 468.433 181.79 468.237 182.255V182.237ZM351.181 123.61L351.662 123.865C356.958 119.357 362.772 115.469 368.989 112.278C375.314 109.026 382.243 107.049 389.364 106.467C387.819 100.365 386.345 94.4554 384.8 88.5688C384.678 88.3563 384.507 88.1744 384.301 88.0373C384.095 87.9002 383.859 87.8116 383.612 87.7784C381.75 87.5084 379.865 87.417 377.985 87.5053C371.823 88.1329 366.392 90.62 361.532 94.2868C358.763 96.3729 356.279 98.7148 355.477 102.271C354.431 106.868 353.272 111.441 352.298 116.055C351.781 118.548 351.555 121.099 351.193 123.627L351.181 123.61ZM429.995 175.276C428.42 177.019 426.893 178.565 425.544 180.256C425.083 180.878 424.887 181.651 424.997 182.412C426.851 190.995 428.456 199.612 428.563 208.422C428.563 209.834 428.563 211.246 428.563 212.71C436.715 210.45 455.337 190.849 457.363 182.447C452.61 182.846 447.823 182.48 443.192 181.366C438.449 180.16 433.978 178.101 430.006 175.293L429.995 175.276ZM447.226 136.981C447.392 137.039 447.567 137.067 447.743 137.062C453.834 136.649 459.514 134.738 465.076 132.46C467.03 131.652 467.452 130.647 467.084 128.462C466.49 124.975 466.026 121.488 465.248 118.031C462.77 107.112 458.961 96.6868 452.924 87.1218C452.33 86.1978 451.629 85.3436 450.916 84.3732C451.011 93.3571 451.653 102.132 451.035 110.825C450.417 119.519 448.533 128.235 447.208 136.998L447.226 136.981ZM411.61 113.539C409.192 115.096 406.987 116.578 404.718 117.938C403.755 118.519 403.648 119.1 404.005 120.065C409.82 136.192 415.621 152.324 421.408 168.459C421.606 168.951 421.83 169.432 422.08 169.9C422.353 169.749 422.472 169.72 422.531 169.645C426.337 164.612 429.485 159.135 431.902 153.339C432.068 152.938 431.688 152.142 431.308 151.723C429.21 149.3 426.816 147.075 424.95 144.518C420.149 137.893 417.089 130.414 414.504 122.749C413.512 119.809 412.62 116.822 411.592 113.556L411.61 113.539ZM507.34 77.3185L506.806 77.4812C506.775 77.6734 506.761 77.8678 506.764 78.0623C507.756 85.5295 509.141 92.9735 509.64 100.47C510.074 107.356 509.717 114.312 509.313 121.215C509.064 125.388 508.024 129.513 507.43 133.674C507.323 134.418 507.632 135.22 507.745 135.999C508.491 135.9 509.22 135.705 509.913 135.417C513.383 133.389 516.824 131.35 520.217 129.171C520.46 128.964 520.656 128.71 520.792 128.425C520.928 128.139 521.001 127.829 521.007 127.515C521.043 125.205 520.93 122.895 520.668 120.599C519.046 108.815 515.971 97.2658 511.512 86.2036C510.294 83.1819 508.725 80.2938 507.323 77.3359L507.34 77.3185ZM435.372 143.152C435.565 142.903 435.727 142.632 435.853 142.344C436.756 138.817 437.683 135.296 438.491 131.745C438.546 131.119 438.358 130.497 437.963 130.002C432.682 123.017 428.712 115.17 426.239 106.827C425.871 105.607 425.532 104.386 425.098 102.887C423.482 104.259 422.127 105.566 420.624 106.629C419.329 107.542 419.246 108.57 419.519 109.942C421.735 121.215 426.649 131.309 433.435 140.613C434.035 141.409 434.665 142.193 435.372 143.152ZM496.075 69.9326H495.427C495.35 71.7108 495.255 73.489 495.195 75.2671C494.904 83.9198 493.65 92.4099 490.721 100.621C490.544 101.138 490.576 101.701 490.81 102.196C494.637 108.803 496.687 115.974 497.982 123.394C498.243 124.882 498.54 126.358 498.82 127.84L499.497 127.764C501.629 108.435 500.472 88.8929 496.075 69.9326V69.9326ZM381.55 57.9445L381.045 57.8863C373.822 65.2232 367.871 73.6632 363.427 82.8739C369.577 79.9393 375.905 78.225 382.875 78.5911C382.423 71.5597 381.99 64.7492 381.55 57.9445ZM440.565 117.944L440.993 117.839C442.878 105.77 442.972 93.4987 441.272 81.4037C440.981 81.4966 440.91 81.6884 440.803 81.8628C438.099 86.3721 435.372 90.8699 432.704 95.3968C432.449 95.89 432.368 96.4517 432.472 96.9948C433.538 102.533 435.376 107.902 437.933 112.952C438.783 114.631 439.686 116.282 440.565 117.944Z"
                        fill="url(#paint0_linear_1686_9384)" />
                    <path
                        d="M529.857 131C529.857 201.912 470.959 259.5 398.178 259.5C325.398 259.5 266.5 201.912 266.5 131C266.5 60.0876 325.398 2.5 398.178 2.5C470.959 2.5 529.857 60.0876 529.857 131Z"
                        stroke="url(#paint0_linear_1686_9384)" strokeWidth="7">
                    </path>
                    <defs>
                        <linearGradient id="paint0_linear_1686_9384" x1="398.178" y1="0" x2="398.178" y2="262"
                        gradientUnits="userSpaceOnUse">
                        <stop offset="0%" stopColor="#10FEF0">
                        <animate attributeName="stop-color" values="#10FEF0; #5CAF01; #F67D13; #8370FF; #10FEF0;" dur="7s"
                        repeatCount="indefinite"></animate>
                        </stop>
                        <stop offset="100%" stopColor="#2BCDFC">
                            <animate attributeName="stop-color" values="#2BCDFC; #52DF01; #BC5C08; #C1B8FF; #2BCDFC;" dur="8s"
                            repeatCount="indefinite"></animate>
                        </stop>
                        </linearGradient>
                    </defs>
                    </svg>
                    <h4>version 1.0.0</h4>
                </div>
                <h1>CULCEPTION CONTROL</h1>
                <div>
                    <input onChange={this.setUsername} type="text" placeholder='User Name / Email'/>
                </div>
                <div>
                    <input onChange={this.setPassword} type="password" placeholder='Password'/>
                </div>
                <button onClick={this.whenSubmit}>Log in</button>                
                <a href="">Need Help?</a>
                <a href="">Privacy</a>
                {(this.state.isLoading)? 
                <div>Connecting...</div>: null
                }
                {(this.state.isLogedin)?
                <section>
                    <h1>Sites-</h1>
                    <NavLink exact to="/dashboard">Emek Hefer</NavLink> 
                                 
                </section> : null
            }
            </section>
        )
    }
}